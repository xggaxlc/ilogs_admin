<div id="page-article-index" class="page-content">
  <md-card>
    <md-toolbar class="md-table-toolbar md-default">
      <div class="md-toolbar-tools">
        <div class="search-box" layout="row">
          <md-icon>search</md-icon>
          <input type="text" placeholder="输入标题搜索" ng-model="vm.keyword" ng-keydown="vm.search($event)">
        </div>
        <span flex></span> 
        <md-button class="md-icon-button" ng-click="vm.query()">
          <md-icon class="icon">refresh</md-icon>
          <md-tooltip md-direction="bottom">
            刷新
          </md-tooltip>
        </md-button>
      </div>
    </md-toolbar>
    <md-progress-linear ng-class="{true: 'visible', false: 'invisible'}[!!vm.showLoading]" md-mode="indeterminate"></md-progress-linear>
    <md-table-container>
      <table md-table>
        <thead md-head>
          <tr md-row ng-show="!vm.showLoading" ng-class="animateClass">
            <th md-column>#</th>
            <th md-column>标题</th>
            <th md-column>作者</th>
            <th md-column>分类</th>
            <th md-column>状态</th>
            <th md-column>创建时间</th>
            <th md-column>更新时间</th>
            <th md-column>更新用户</th>
            <th md-column>操作</th>
          </tr>
        </thead>
        <tbody md-body>
          <tr md-row ng-repeat="item in vm.posts" ng-class="animateClass">
            <td md-cell>{{$index + 1}}</td>
            <td md-cell>
              {{item.title | limitTo: '8'}}
              <md-tooltip>
                {{item.title}}
              </md-tooltip>
            </td>
            <td md-cell>{{item.author.name}}</td>
            <td md-cell>{{item.category.name}}</td>
            <td md-cell ng-class="{true: 'published', false: 'unPublished'}[item.published]">{{item.published ? '已发布' : '未发布'}}</td>
            <td md-cell>{{item.create_at | date: 'yyyy-MM-dd HH:mm:ss'}}</td>
            <td md-cell>{{item.update_at || '/' | date: 'yyyy-MM-dd HH:mm:ss'}}</td>
            <td md-cell>{{item.update_by.name || '/'}}</td>
            <td md-cell>
              <md-icon ui-sref="main.article.edit({id: item._id})">open_in_new
                <md-tooltip md-direction="bottom">
                  编辑
                </md-tooltip>
              </md-icon>
              <md-icon ng-click="vm.showDeleteConfirm($event, item)">delete
                <md-tooltip md-direction="bottom">
                  删除
                </md-tooltip>
              </md-icon>
            </td>
          </tr>
        </tbody>
      </table>
      <paging options="vm.pageOptions" class="layout-double-margin" ng-class="animateClass" ng-if="!vm.showLoading"></paging>
    </md-table-container>
  </md-card>
