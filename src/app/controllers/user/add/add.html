<div id="page-user-add" class="page-content" layout="row" layout-align="center center">
  <md-card class="form-box">
    <md-card-title>
      <md-card-title-text class="md-headline">
        <span class="md-headline">{{vm.title}}</span>
        <span class="md-subhead">带*必填</span>
        <span class="md-subhead">用户组必选</span>
      </md-card-title-text>
      <md-card-title-media>
        <div class="md-media-lg card-media avatar">
          <upload-image image="vm.user.avatar" response="vm.avatarUploadResult" options="vm.uploadOptions"></upload-image>
        </div>
      </md-card-title-media>
    </md-card-title>
    <md-card-content>
      <form name="userForm" novalidate>
        <md-input-container class="md-block">
          <label>用户名</label>
          <input ng-model="vm.user.name" type="text" name="name" required>
          <div ng-messages="userForm.name.$error">
            <div ng-message="required">用户名必填。</div>
          </div>
        </md-input-container>
        <md-input-container class="md-block">
          <label>邮箱</label>
          <input ng-model="vm.user.email" type="email" name="email" required>
          <div ng-messages="userForm.email.$error">
            <div ng-message="required">邮箱必填。</div>
            <div ng-message="email">邮箱格式不正确。</div>
          </div>
        </md-input-container>
        <md-input-container class="md-block">
          <label>密码</label>
          <input ng-model="vm.user.password" name="password" type="password" minlength="6" md-maxlength="16" ng-required="vm.requirePass">
          <div ng-messages="userForm.password.$error">
            <div ng-message="required">密码必填。</div>
            <div ng-message="minlength">密码至少6位。</div>
            <div ng-message="md-maxlength">密码最多16位。</div>
          </div>
        </md-input-container>
        <md-input-container class="md-block">
          <label>重复输入密码</label>
          <input ng-model="repeatPw" name="repeatPw" type="password" compare-to="vm.user.password" minlength="6" md-maxlength="16">
          <div ng-messages="userForm.repeatPw.$error">
            <div ng-message="required">请重复输入密码。</div>
            <div ng-message="minlength">密码至少6位。</div>
            <div ng-message="md-maxlength">密码最多16位。</div>
            <div ng-message="compareTo">两次密码输入不一致。</div>
          </div>
        </md-input-container>
        <md-input-container class="md-block" ng-hide="vm.user.master">
          <label>用户组</label>
          <md-select ng-model="vm.user.role" name="role">
            <md-option value="{{item._id}}" ng-repeat="item in vm.roles">{{item.name}}</md-option>
          </md-select>
        </md-input-container>
        <md-input-container class="md-block" ng-hide="vm.user.master">
          <md-switch ng-model="vm.user.active" class="md-primary" aria-label="active switch">
            {{vm.user.active ? '正常' : '锁定'}}
          </md-switch>
        </md-input-container>
        <md-input-container class="md-block">
          <md-switch ng-model="vm.user.sex" class="md-primary" aria-label="sex switch">
            {{vm.user.sex ? '男' : '女'}}
          </md-switch>
        </md-input-container>
        <md-input-container class="md-block">
          <label>手机号码</label>
          <input ng-model="vm.user.tel" type="text">
        </md-input-container>
        <md-input-container class="md-block">
          <label>qq</label>
          <input ng-model="vm.user.qq" type="text">
        </md-input-container>
        <md-input-container class="md-block">
          <label>签名</label>
          <textarea ng-model="vm.user.remark" md-maxlength="150" rows="5" md-select-on-focus></textarea>
        </md-input-container>

        <md-card-actions layout="row" layout-align="end center">
          <md-button class="md-raised md-primary" ui-sref="main.user.index" style="margin-right:16px;">返回用户列表</md-button>
          <loading-button data-class="md-raised md-accent" data-text="提交" data-click="vm.submit($event)" data-loading="vm.showLoading" data-disabled="userForm.$invalid || vm.showLoading"></loading-button>
        </md-card-actions>
      </form>
    </md-card-content>
  </md-card>
</div>